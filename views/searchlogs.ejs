<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Log | Log Book</title>
    <link rel="stylesheet" href="/dashboard.css" />
    <script
      src="https://kit.fontawesome.com/bb7a749298.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <%- include('partials/navbar') %>
    <div class="container">
      <div class="dashboard">
        <div class="dashboard-heading">
          <div class="logos">
            <i class="fa-brands fa-dailymotion"></i>
            <h1>Daily Log Book</h1>
          </div>
          <p>Track your daily logs and events</p>
        </div>
        <div class="dashboard-btn">
          <a href="/addlog"
            ><button><i class="fa-solid fa-plus"></i> Add Log</button></a
          >
        </div>
      </div>
      <div class="all-logs">
        <div class="log-heading">
          <div class="title">
            <i class="fa-solid fa-magnifying-glass">
              <h2 style="text-transform: capitalize">Search Logs</h2>
            </i>
            <div class="search">
              <form action="/search" method="post">
                <input type="search" name="search" placeholder="Search" />
                <input type="submit" value="Search">
              </form>
            </div>
          </div>
          

          <% if (Array.isArray(data) && data.length) { %>
            <% data.forEach((log) => {
              const status = log.status === "Solved" ? "green" : "orange";
              %>
              <div class="all-log-box">
                <div class="log <%= status %>">
                  <div class="log-name">
                    <h3><%= log?.description ?? 'No description' %></h3>
                    <p>
                      <%= log?.reportedBy ?? 'Unknown user' %> .
                      <%= log?.date ?? 'No date' %>
                    </p>
                  </div>
                  <div class="log-btn">
                    <a href="/viewlog/<%= log.id %>"><button>View</button></a>
                  </div>
                </div>
              </div>
            <% }) %>
          <% } else { %>
            <p>No logs available</p>
          <% } %>


        </div>
      </div>
    </div>
  </body>
</html>
